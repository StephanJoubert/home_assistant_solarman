requests:
  - start: 0x01F4
    end: 0x0230
    mb_functioncode: 0x04
  - start: 0x03E8
    end: 0x03FF
    mb_functioncode: 0x04 
  - start: 0x07D0
    end: 0x07DF
    mb_functioncode: 0x04   
  - start: 0x09C4
    end: 0x09D3
    mb_functioncode: 0x04
      
parameters:
  - group: solar
    items:
      - name: "PV1 Voltage"
        class: "voltage"
        state_class: "measurement"
        uom: "V"
        scale: 0.1
        rule: 1
        registers: [0x022B]
        icon: "mdi:solar-power"

      - name: "PV2 Voltage"
        class: "voltage"
        state_class: "measurement"
        uom: "V"
        scale: 0.1
        rule: 1
        registers: [0x022E]
        icon: "mdi:solar-power"

      - name: "PV1 Current"
        class: "current"
        state_class: "measurement"
        uom: "A"
        scale: 0.01
        rule: 1
        registers: [0x022C]
        icon: "mdi:solar-power"

      - name: "PV2 Current"
        class: "current"
        state_class: "measurement"
        uom: "A"
        scale: 0.01
        rule: 1
        registers: [0x022F]
        icon: "mdi:solar-power"

      - name: "PV1 W"
        class: "power"
        state_class: "measurement"
        uom: "W"
        scale: 1
        rule: 1
        registers: [0x022D]
        icon: "mdi:solar-power"  

      - name: "PV2 W"
        class: "power"
        state_class: "measurement"
        uom: "W"
        scale: 1
        rule: 1
        registers: [0x0230]
        icon: "mdi:solar-power"  

      - name: "PV Power W"
        class: "power"
        state_class: "total"
        uom: "W"
        scale: 1
        rule: 1
        registers: [0x022A]
        icon: "mdi:solar-power"

  - group: Battery
    items:
      - name: "Total Battery Charge"
        class: "energy"
        state_class: "total_increasing"      
        uom: "kWh"
        scale: 0.1
        rule: 1
        registers: [0x07DC]
        icon: 'mdi:battery-plus'

      - name: "Total Battery Discharge"
        class: "energy"
        state_class: "total_increasing"
        uom: "kWh"
        scale: 0.1
        rule: 1
        registers: [0x07DE]
        icon: 'mdi:battery-minus'

      - name: "Daily Battery Charge"
        class: "energy"
        state_class: "total_increasing"      
        uom: "kWh"
        scale: 0.1
        rule: 1
        registers: [0x07D9]
        icon: 'mdi:battery-plus'

      - name: "Daily Battery Discharge"
        class: "energy"
        state_class: "total_increasing"      
        uom: "kWh"
        scale: 0.1
        rule: 1
        registers: [0x07DA]
        icon: 'mdi:battery-minus'

      - name: "Battery Status"
        class: ""
        state_class: "measurement"
        uom: ""
        scale: 1
        rule: 1
        registers: [0x07D0]
        isstr: true
        lookup: 
        - key: 4
          value: "Charge"
        - key: 5
          value: "Discharge"
        - key: 6
          value: "Stand-by"
        icon: 'mdi:battery' 

      - name: "Battery Power"
        class: "power"
        state_class: "measurement"
        uom: "W"
        scale: 1
        rule: 2
        registers: [0x07D8]
        icon: 'mdi:battery'

      - name: "Battery Voltage"
        class: "voltage"
        state_class: "measurement"
        uom: "V"
        scale: 0.1
        rule: 1
        registers: [0x07D4]
        icon: 'mdi:battery'

      - name: "Battery Current"
        class: "current"
        state_class: "measurement"
        uom: "A"
        scale: 0.01
        rule: 2
        registers: [0x07D5]
        icon: 'mdi:battery'

      - name: "Battery SOC"
        class: "battery"
        state_class: "measurement"
        uom: "%"
        scale: 1
        rule: 1
        registers: [0x07D2]
        icon: 'mdi:battery' 

      - name: "Battery Temperature"
        class: "temperature"
        state_class: "measurement"
        uom: "°C"
        scale: 0.1
        rule: 1     
        registers: [0x07D1]
        icon: 'mdi:battery'                   

  - group: Grid
    items:
      - name: "Output active power"
        class: "power"
        state_class: "measurement"
        uom: "W"
        scale: 1
        rule: 1
        registers: [0x020B]
        icon: "mdi:home-lightning-bolt"

      - name: "Power from grid"
        class: "power"
        state_class: "measurement"
        uom: "W"
        scale: 1
        rule: 1
        registers: [0x0212]
        icon: "mdi:home-lightning-bolt"    

      - name: "AC Voltage"
        class: "voltage"
        state_class: "measurement"
        uom: "V"
        scale: 0.1
        rule: 1
        registers: [0x01FB]
        icon: 'mdi:transmission-tower'

      - name: "Grid Current"
        class: "current"
        state_class: "measurement"      
        uom: "A"
        scale: 0.01
        rule: 2
        registers: [0x01FE]
        icon: 'mdi:home-lightning-bolt'

      - name: "AC Frequency"
        class: "frequency"
        state_class: "measurement"
        uom: "Hz"
        scale: 0.01
        rule: 1
        registers: [0x0201]
        icon: 'mdi:home-lightning-bolt'
  
  - group: Inverter
    items:
      - name: "Running Status"
        class: ""
        state_class: ""      
        uom: ""
        scale: 1
        rule: 1
        registers: [0x09C4]
        isstr: true
        lookup: 
          - key: 1
            value: "Stand-by"
          - key: 2
            value: "Start-up"
          - key: 3
            value: "Grid"
          - key: 4
            value: "Run grid disconnected"
          - key: 5
            value: "Run generator"
          - key: 6
            value: "Off grid"
          - key: 7
            value: "On grid" 
          - key: 10
            value: "On grid"         
        icon: 'mdi:home-lightning-bolt'

      - name: "Inverter radiator temperature"
        class: "temperature"
        state_class: "measurement"
        uom: "°C"
        scale: 0.1
        rule: 1
        registers: [0x09D3]
        icon: "mdi:thermometer"

      - name: "Inverter inner temperature"
        class: "temperature"
        state_class: "measurement"
        uom: "°C"
        scale: 0.1
        rule: 1
        registers: [0x09D2]
        icon: "mdi:thermometer"  
  
  - group: Total
    items:
      - name: "PV Etoday"
        class: "energy"
        state_class: "total"
        uom: "kWh"
        scale: 0.1
        rule: 1
        registers: [0x03EF]
        icon: 'mdi:solar-power'

      - name: "Etoday feed into grid"
        class: "energy"
        state_class: "total"
        uom: "kWh"
        scale: 0.1
        rule: 1
        registers: [0x03EA]
        icon: 'mdi:transmission-tower'  

      - name: "Etoday received from grid"
        class: "energy"
        state_class: "total"
        uom: "kWh"
        scale: 0.1
        rule: 1
        registers: [0x03EB]
        icon: 'mdi:transmission-tower'  

      - name: "Etoday to load"
        class: "energy"
        state_class: "total"
        uom: "kWh"
        scale: 0.1
        rule: 1
        registers: [0x03EC]
        icon: 'mdi:home-lightning-bolt'

      - name: "Etotal inverter"
        class: "energy"
        state_class: "total_increasing"
        uom: "kWh"
        scale: 0.1
        rule: 1
        registers: [0x03F7]
        icon: 'mdi:solar-power'     

      - name: "Etotal feed into grid"
        class: "energy"
        state_class: "total_increasing"
        uom: "kWh"
        scale: 0.1
        rule: 1
        registers: [0x03FB]
        icon: 'mdi:transmission-tower'

      - name: "Etotal received from grid"
        class: "energy"
        state_class: "total_increasing"
        uom: "kWh"
        scale: 0.1
        rule: 1
        registers: [0x03FD]
        icon: 'mdi:transmission-tower' 

      - name: "Etotal to load"
        class: "power"
        state_class: "total_increasing"
        uom: "kWh"
        scale: 0.1
        rule: 1
        registers: [0x03FF]
        icon: 'mdi:home-lightning-bolt'